---
import { Img, Link } from '@daks.dev/astro.sdk/astro';
import { SidebarToggle, ThemeToggle, ToTop } from '@components/astro';
import NavbarMenu from './NavbarMenu.astro';
import NavbarMenuToggle from './NavbarMenuToggle.astro';

import { navbar } from '@app/configs/nav';

import logo from '@assets/images/logo.navbar.webp';
/*
const src = await getImage({
  src: logo,
  width: 80,
  height: 80,
  fit: 'contain'
});
*/
---

<div
  id='app-navbar'
  class:list={[
    'fixed top-0 left-0 z-50',
    'h-(--navbar-height) w-full px-5',
    'grid grid-cols-[1fr_auto] place-content-center gap-x-3',
    'bp:grid-cols-[1fr_auto_1fr]',
    'bg-theme-frame',
    'shadow-xs shadow-neutral-300 dark:shadow-neutral-900 onscroll:shadow-md'
    // 'border-b border-gray-100 dark:border-gray-900'
  ]}>
  <div class:list={['flex items-center justify-between', 'menu-header']}>
    <div class='flex items-center gap-x-7 max-bp:contents'>
      <SidebarToggle
        custom={['iconify ph--dots-three-outline-vertical', 'size-6']}
        class={[
          'p-2 2xl:-ml-3.5 ',
          'text-slate-500',
          'aria-expanded:rotate-90',
          'motion-safe:ready:transition-transform duration-300 ease-in-out'
        ]}
      />
      <Link
        href='/'
        class='max-bp:mx-auto'
        aria-label='главная страница'
        data-astro-prefetch>
        <span
          class='sr-only'
          set:text='главная страница'
        />
        <Img
          class:list={[
            'drop-shadow-xs drop-shadow-black hover:drop-shadow-sm',
            'ready:animate-[wiggle_20s_ease-in-out_infinite]'
          ]}
          src={logo}
          width={40}
          height={40}
          alt='ао ниц «строительная экспертиза»'
          eager
        />
      </Link>
    </div>
    <NavbarMenuToggle
      custom={['iconify ph--list', 'size-6']}
      class:list={[
        'min-h-10 min-w-10 p-2',
        'text-slate-500',
        'rounded-full',
        'shadow-2xs shadow-gray-400 hover:shadow-md dark:shadow-gray-950'
      ]}
    />
  </div>
  <NavbarMenu items={navbar}>
    <div
      class:list={[
        'flex justify-around bp:contents',
        'py-2',
        'bg-theme-frame',
        'border-t border-neutral-200 dark:border-neutral-700/50'
      ]}>
      <ThemeToggle class='self-center justify-self-end' />
    </div>
  </NavbarMenu>
  <ToTop
    custom={['iconify ph--arrow-fat-lines-up-duotone', 'size-8']}
    class:list={[
      'mt-8 p-2',
      'text-slate-500',
      'bg-gray-300/50 dark:bg-gray-700/50',
      'rounded-full'
    ]}
  />
</div>
